<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">
<p><span style="font-family:Courier New,courier;"><span style="font-size:9pt;"><span style="color:#0000c0;">From: Старик Хоттабыч &lt;</span><a href="mailto:old.hottab@REMOVE-THIS-FAKE.gmail.com">old.hottab@gmail.com.</a>&gt;</span></span></p>
<p>Newsgroups: email</p>
<p>Date: Mon, 10 Nov 2006 14:31:37 +0000 (UTC)</p>
<p><strong>Subject: Пакеты в Slackware или Как не сделать из системы свалку</strong></p>
<p>&nbsp;<p>&nbsp;<p>Наиболее часто к Slackware-системам предъявляются следующие претензии:</p>
<p>        </p>
<p><span style="color:#461b7e;">    1 - Отсутствие менеджера пакетов</span></p>
<p>    2 - Отсутствие зависимостей</p>
<p>    3 - Сложность обновлений</p>
<p>    4 - Недостаточное количество софта в дистрибутиве.</p>
<p>    </p>
<p>    </p>
<p>Попробуем в этом всем разобраться.....</p>
<p>Итак,</p>
<p>    </p>
<p><strong><span style="color:#990000;">1 - Менеджер пакетов в Slackware ЕСТЬ.</span></strong></p>
<p>&nbsp;<p>Называется pkgtool. Подробно описано вот здесь:</p>
<p>(SlackBook, глава 18)</p>
<p>&nbsp;<p><a href="http://lafox.net/docs/slackbook/slackbook/package-management.html">Описание формата пакетов</a>:</p>
<p>&nbsp;<p><em>	</em></p>
<p>&nbsp;<p><em>   ....В Slackware пакет - это просто tar-архив, сжатый  gzip'ом. </em></p>
<p><em>   Собранные  пакеты  предназначены  для  распаковки  в корневой</em></p>
<p><em>   каталог.</em></p>
<p>&nbsp;<p><em>   Вот пример фиктивной программы и её пакета:</em></p>
<p>&nbsp;<p><span style="color:#461b7e;"><em>           ./</em></span></p>
<p><em>           usr/</em></p>
<p><em>           usr/bin/</em></p>
<p><em>           usr/bin/makehejaz</em></p>
<p><em>           usr/doc/</em></p>
<p><em>           usr/doc/makehejaz-1.0/</em></p>
<p><em>           usr/doc/makehejaz-1.0/COPYING</em></p>
<p><em>           usr/doc/makehejaz-1.0/README</em></p>
<p><em>           usr/man/</em></p>
<p><em>           usr/man/man1</em></p>
<p><em>           usr/man/man1/makehejaz.1.gz</em></p>
<p><em>           install/</em></p>
<p><em>           install/doinst.sh</em></p>
<p>&nbsp;<p>&nbsp;<p><em>   Система  работы  с  пакетами  распакует этот файл в корневой каталог и</em></p>
<p><em>   установит его. В базе данных пакетов будет создана запись с содержимым</em></p>
<p><em>   этого пакета, чтобы позже его можно было удалить или обновить.</em></p>
<p>&nbsp;<p><em>   Обратите  внимание  на подкаталог install/. Это специальный каталог, в</em></p>
<p><em>   котором  находится  скрипт, выполняемый после установки, под названием</em></p>
<p><em>   doinst.sh.  Если  менеджер  пакетов  найдёт этот файл, он запустит его</em></p>
<p><em>   после установки пакета.</em></p>
<p>&nbsp;<p>	</p>
<p>&nbsp;<p><a href="http://lafox.net/docs/slackbook/slackbook/package-management-package-utilities.html">Утилиты работы с пакетами</a></p>
<p>&nbsp;<p><em>	</em></p>
<p>&nbsp;<p><em>   Для  управления  пакетами  существуют  четыре  основные  утилиты.  Они</em></p>
<p><em>   выполняют установку, удаление и обновление пакетов.</em></p>
<p>&nbsp;<p><em>   pkgtool(8)  -  это  программа  с  поддержкой  меню,  которая позволяет</em></p>
<p><em>   устанавливать и удалять пакеты. </em></p>
<p>&nbsp;<p><em>   Установка  может быть выполнена из текущего каталога, другого каталога</em></p>
<p><em>   или  с  дискет.  Просто  выберите нужный вам метод установки и pkgtool</em></p>
<p><em>   начнёт искать в указанном вами месте пригодные к установке пакеты.</em></p>
<p>&nbsp;<p><em>   Также вы можете просмотреть список установленных пакетов.</em></p>
<p>&nbsp;<p><em>   Если  вам  нужно  удалить  пакеты,  выберите  опцию Remove и вам будет</em></p>
<p><em>   представлен список всех установленных пакетов. Отметьте те, которые вы</em></p>
<p><em>   хотите удалить, и нажмите OK. pkgtool выполнит их удаление.</em></p>
<p>&nbsp;<p><em>   Некоторые пользователи отдают предпочтение этой утилите, а не утилитам</em></p>
<p><em>   командной строки. Однако, следует отметить, что эти консольные утилиты</em></p>
<p><em>   предлагают  гораздо  больше  функций.  Кроме  того, обновление пакетов</em></p>
<p><em>   возможно только с помощью утилит командной строки.</em></p>
<p>&nbsp;<p><em>   installpkg</em></p>
<p>&nbsp;<p><em>   Утилита  installpkg(8) выполняет установку в систему новых пакетов. Её</em></p>
<p><em>   синтаксис следующий:</em></p>
<p><em>   </em></p>
<p><em>        # installpkg опция имя_пакета</em></p>
<p>&nbsp;<p>&nbsp;<p><em>   У   installpkg   есть   только  три  опции.  Одновременно  может  быть</em></p>
<p><em>   использована только одна опция.</em></p>
<p>&nbsp;<p><em>   Опции installpkg</em></p>
<p><em>   -m    Выполняет действие makepkg в текущем каталоге.</em></p>
<p><em>   -warn Показывает, что произойдёт, если вы установите указанный пакет.</em></p>
<p><em>         Это полезно для ответственных систем, когда, перед тем как</em></p>
<p><em>         устанавливать что-либо, вы можете узнать что при этом произойдёт.</em></p>
<p><em>   -r    Рекурсивно устанавливает все пакеты их текущего каталога и ниже.</em></p>
<p><em>         Имя пакета может содержать маску, которая будет использована при</em></p>
<p><em>         рекурсивном поиске пакетов для установки.</em></p>
<p>&nbsp;<p><em>   Если   вы   определите   переменную   окружения  ROOT  перед  запуском</em></p>
<p><em>   installpkg, этот путь будет использован в качестве корневого каталога.</em></p>
<p><em>   Это  полезно для настройки новых дисков для размещения на них корневых</em></p>
<p><em>   каталогов.  Обычно они монтируются в /mnt или какой-то другой каталог,</em></p>
<p><em>   отличный от /.</em></p>
<p>&nbsp;<p><em>   Запись   в   базе   данных   об   установленном   пакете   хранится  в</em></p>
<p><em>   /var/log/packages.  Запись  представляет собой обычный текстовый файл,</em></p>
<p><em>   по  одному  на  пакет. Если в пакете есть послеустановочный скрипт, он</em></p>
<p><em>   записывается в каталог /var/log/scripts/.</em></p>
<p>&nbsp;<p><em>   Вы  можете  указать  несколько пакетов или использовать маски в именах</em></p>
<p><em>   файлов.   Учтите,   что   installpkg   не   сообщит  вам,  если  будет</em></p>
<p><em>   перезаписываться  уже  установленный  пакет.  Он  просто установит его</em></p>
<p><em>   поверх  старого.  Если  вы  хотите,  чтобы старые файлы из предыдущего</em></p>
<p><em>   пакета были безопасно удалены, используйте утилиту upgradepkg.</em></p>
<p>&nbsp;<p><em>   removepkg</em></p>
<p>&nbsp;<p><em>   Утилита  removepkg(8)  удаляет  из  системы  установленные  пакеты. Её</em></p>
<p><em>   синтаксис следущий:</em></p>
<p><em>   # removepkg опция имя_пакета</em></p>
<p>&nbsp;<p><em>   У   removepkg  есть  только  четыре  опции.  Одновременно  может  быть</em></p>
<p><em>   использована только одна опция.</em></p>
<p>&nbsp;<p><em>   Опции removepkg</em></p>
<p><em>   -copy     Пакет копируется в специальный каталог для пакетов. Так можно</em></p>
<p><em>             создать дерево из оригинальных пакетов, не удаляя их.</em></p>
<p><em>   -keep     Сохраняет временные файлы, созданные во время удаления. В</em></p>
<p><em>             действительности полезно только в целях отладки.</em></p>
<p><em>   -preserve Пакет удаляется, однако в тоже время он копируется в каталог</em></p>
<p><em>             для резервных копий.</em></p>
<p><em>   -warn     Показывает, что бы произошло, если бы вы удалили пакет.</em></p>
<p>&nbsp;<p><em>   Если вы определите переменную окружения ROOT перед запуском removepkg,</em></p>
<p><em>   этот путь будет использован в качестве корневого каталога. Это полезно</em></p>
<p><em>   для  настройки  новых дисков для размещения на них корневых каталогов.</em></p>
<p><em>   Обычно они монтируются в /mnt или какой-то другой каталог, отличный от /.</em></p>
<p>&nbsp;<p><em>   removepkg  выполняет  поиск  и  в  остальных установленных пакетах, но</em></p>
<p><em>   удаляет  только  те файлы, которые являются уникальными для указанного</em></p>
<p><em>   вами  пакета.  Он также найдёт послеустановочный скрипт для указанного</em></p>
<p><em>   пакета и удалит все созданные им символические ссылки.</em></p>
<p>&nbsp;<p><em>   Во  время  процесса  удаления  на  экран  выводится  отчёт  о ходе его</em></p>
<p><em>   выполнения.  После удаления запись из базы данных пакетов перемещается</em></p>
<p><em>   в  каталог  /var/log/removed_packages,  а  скрипт,  выполняемый  после</em></p>
<p><em>   установки, перемещается в /var/log/removed_scripts.</em></p>
<p>&nbsp;<p><em>   Как  и  в  случае с installpkg вы можете указать несколько пакетов или</em></p>
<p><em>   использовать маски в именах пакетов.</em></p>
<p>&nbsp;<p><em>   upgradepkg</em></p>
<p>&nbsp;<p><em>   Утилита  upgradepkg(8)  обновляет  установленные  пакеты Slackware. Её</em></p>
<p><em>   синтаксис следующий:</em></p>
<p>&nbsp;<p><em>           # upgradepkg имя_пакета</em></p>
<p>&nbsp;<p>&nbsp;<p><em>   или</em></p>
<p>&nbsp;<p><em>           # upgradepkg старое_имя_пакета%старое_имя_пакета</em></p>
<p>&nbsp;<p>&nbsp;<p><em>   upgradepkg  сначала  устанавливает новый пакет, а затем удаляет старый</em></p>
<p><em>   пакет,  чтобы  в  системе  больше  не  осталось  старых файлов. Если у</em></p>
<p><em>   обновляемого   пакета  изменилось  имя,  используйте  в  команде  знак</em></p>
<p><em>   процента  для  указания  старого имени пакета (того, что установлен) и</em></p>
<p><em>   нового имени пакета (до которого вы выполняете обновление).</em></p>
<p>&nbsp;<p><em>   Если   вы   определите   переменную   окружения  ROOT  перед  запуском</em></p>
<p><em>   upgradepkg, этот путь будет использован в качестве корневого каталога.</em></p>
<p><em>   Это  полезно для настройки новых дисков для размещения на них корневых</em></p>
<p><em>   каталогов.  Обычно они монтируются в /mnt или какой-то другой каталог,</em></p>
<p><em>   отличный от /.</em></p>
<p>&nbsp;<p><em>   upgradepkg   не   лишён  недостатков.  Вам  всегда  следует  создавать</em></p>
<p><em>   резервные  копии своих конфигурационных файлов. Если они будут удалены</em></p>
<p><em>   или  перезаписаны,  для нормальной работы вам потребуется восстановить</em></p>
<p><em>   их оригиналы.</em></p>
<p>&nbsp;<p><em>   Как  и  в  случае с installpkg и removepkg вы можете указать несколько</em></p>
<p><em>   пакетов или использовать маски в именах пакетов.</em></p>
<p>&nbsp;<p><em>   rpm2tgz/rpm2targz</em></p>
<p>&nbsp;<p><em>   Менеджер  пакетов  Red  Hat  (Red  Hat  Package  Manager,  RPM)  - это</em></p>
<p><em>   популярная  на  сегодняшний  день  система  работы  с пакетами. Многие</em></p>
<p><em>   распространители  программного  обеспечения предлагают свои продукты в</em></p>
<p><em>   формате  RPM.  Поскольку он не является нашим &quot;родным&quot; форматом, мы не</em></p>
<p><em>   рекомендуем вам использовать его. Однако некотрые вещи бывают доступны</em></p>
<p><em>   только в виде RPM (даже исходные тексты).</em></p>
<p>&nbsp;<p><em>   Мы  предлагаем  программу  для преобразования RPM-пакетов в наш родной</em></p>
<p><em>   формат  .tgz.  Это  позволит вам развернуть пакет (возможно, с помощью</em></p>
<p><em>   explodepkg) во временный каталог и изучить его содержимое.</em></p>
<p>&nbsp;<p><em>   Программа  rpm2tgz  создаст  пакет  Slackware  с  расширением  .tgz, а</em></p>
<p><em>   rpm2targz создаёт архив с расширением .tar.gz.</em></p>
<p>&nbsp;<p>	</p>
<p>&nbsp;<p>&nbsp;<p><strong><span style="color:#990000;">2 - Нет зависимостей.</span></strong></p>
<p>&nbsp;<p>Зависимости ЕСТЬ. Может быть, не настолько суровые, как в rpm-based, но</p>
<p>есть. ОТСЛЕЖИВАНИЯ зависимостей нет. Эта процедура перекладывается на</p>
<p>пользователя. Насколько это хорошо/плохо - трудно сказать однозначно.</p>
<p>&nbsp;<p>При отсутствии автоматического отслеживания зависимостей есть риск не</p>
<p>поставить  необходимый пакет, но в Slackware пакеты более</p>
<p>крупноформатные (если можно так выразится). К примеру:</p>
<p>&nbsp;<p><span style="color:#461b7e;">        apache:</span></p>
<p>            Mandriva:	6,921,441 байт в 9 файлах</p>
<p>            Slackware:	1,695,912 байт в 1 файле</p>
<p>        php:</p>
<p>            Mandriva:	634,063 байт в 21 файлах</p>
<p>            Slackware:	7,254,109 байт в 1 файле</p>
<p>        perl:</p>
<p>            Mandriva:	28,335,674 байт в 110 файлах</p>
<p>            Slackware:	13,146,478 байт в 1 файле</p>
<p>        python:</p>
<p>            Mandriva:	16,646,441 байт в 40 файлах </p>
<p>            Slackware:	11,716,884 байт в 1 файле </p>
<p>&nbsp;<p>&nbsp;<p>Естественно, я не утверждаю, что функиональность абсолютно идентична.</p>
<p>Данный пример приведен только с целью показать разницу в подходах к</p>
<p>формированию пакетов.</p>
<p>&nbsp;<p>(Mandriva взята не из каких-либо личных предпочтений, просто оказалась</p>
<p>под рукой... :) )</p>
<p>&nbsp;<p>Очевидно, что в случае с Mandriva установить нечто приемлемо работающее</p>
<p>без автоматического отслеживания зависимостей ОЧЕНЬ сложно. Кроме, разве</p>
<p>что, случая полной установки.. :)</p>
<p>&nbsp;<p>В Slackware вероятность недоставить необходимый пакет гораздо ниже, хотя</p>
<p>и присутствует.</p>
<p>&nbsp;<p>С другой стороны, при наличии в пакете двух вариантов программы -</p>
<p>консольного и графического,  Вам не поставят по зависимостям иксы, если</p>
<p>Вы ими не пользуетесь.</p>
<p>&nbsp;<p>&nbsp;<p><strong><span style="color:#990000;">3 - Обновления.</span></strong></p>
<p>&nbsp;<p>Механизм обновлений наличествует. </p>
<p>( SlackBook, <a href="http://lafox.net/docs/slackbook/slackbook/security-current.html">глава 14.3</a> )</p>
<p>&nbsp;<p><em>	</em></p>
<p>&nbsp;<p><em>   Каталог /patches</em></p>
<p>&nbsp;<p><em>   Все  обновлённые  пакеты, выпущенные для определённой версии Slackware</em></p>
<p><em>   (обычно только для устранения проблем с безопасностью для уже вышедших</em></p>
<p><em>   релизов  Slackware), помещаются в каталог /patches. Полный путь к этим</em></p>
<p><em>   патчам  будет  зависеть  от используемого вами зеркала, однако в общем</em></p>
<p><em>   случае он будет иметь такой вид /путь/к/slackware-x.x/patches/.</em></p>
<p>&nbsp;<p><em>   Перед установкой этих пакетов неплохо было бы проверить md5sum пакета.</em></p>
<p><em>   md5sum(1)   -   это   консольная   утилита,   создающая   &quot;уникальный&quot;</em></p>
<p><em>   математический хэш файла. Если в файле будет изменён хотя бы один бит,</em></p>
<p><em>   для него будет сгенерировано совершенно другое значение md5sum.</em></p>
<p>&nbsp;<p><span style="color:#461b7e;"><em>           % md5sum пакет-&lt;версия&gt;-&lt;архитектура&gt;-&lt;ревизия&gt;.tgz</em></span></p>
<p><em>           6341417aa1c025448b53073a1f1d287d  пакет-&lt;версия&gt;-&lt;архитектура&gt;-&lt;ревизия&gt;.tgz</em></p>
<p>&nbsp;<p>&nbsp;<p><em>   Затем  вам  следует  сравнить это со строкой для этого пакета из файла</em></p>
<p><em>   CHECKSUMS.md5,  находящегося  в  корне  каталога  slackware-$ВЕРСИЯ (а</em></p>
<p><em>   также  в  каталоге  /patches в патчами), или из электронного письма из</em></p>
<p><em>   рассылки slackware-security.</em></p>
<p>&nbsp;<p><em>   Если  у  вас  есть  файл  с  md5-суммами,  в можете использовать его в</em></p>
<p><em>   качестве источника для проверки командой md5sum с опцией -c.</em></p>
<p>&nbsp;<p><em>           # md5sum -c CHECKSUMS.md5</em></p>
<p><em>           ./ANNOUNCE.10_0: OK</em></p>
<p><em>           ./BOOTING.TXT: OK</em></p>
<p><em>           ./COPYING: OK</em></p>
<p><em>           ./COPYRIGHT.TXT: OK</em></p>
<p><em>           ./CRYPTO_NOTICE.TXT: OK</em></p>
<p><em>           ./ChangeLog.txt: OK</em></p>
<p><em>           ./FAQ.TXT: FAILED</em></p>
<p>&nbsp;<p>&nbsp;<p><em>   Как  видите,  все  файлы,  для которых суммы сошлись, md5sum отметил в</em></p>
<p><em>   списке  как  &quot;OK&quot;, а файлы, для которых суммы не сошлись, отмечены как</em></p>
<p><em>   &quot;FAILED&quot;.</em></p>
<p>&nbsp;<p>	</p>
<p>&nbsp;<p>При использовании какой-либо версии Вы всегда можете осведомиться об</p>
<p>имеющихся обновлениях по адресу</p>
<p>&nbsp;<p>    <a href="ftp://ftp.slackware.com/pub/slackware/slackware-%3C">ftp://ftp.slackware.com/pub/slackware/slackware-&lt;</a>;Ваша_версия&gt;/patches/</p>
<p>&nbsp;<p>&nbsp;<p>или с ближайшего зеркала.</p>
<p>&nbsp;<p>Обновления происходят предельно просто: загружаете с сервера необходимый</p>
<p>пакет, говорите</p>
<p>&nbsp;<p>    upgradepkg пакет</p>
<p>&nbsp;<p>&nbsp;<p>все, пакет обновлен.</p>
<p>&nbsp;<p>(Естественно, для важных пакетов стоит предварительно сохранить</p>
<p>конфигурационные файлы. Хотя upgradepkg и не портит их, но мало ли.....)</p>
<p>&nbsp;<p>Можно воспользоваться сторонними (пока что) утилитами </p>
<p>&nbsp;<p>        slapt-get - <a href="http://software.jaos.org/slackpacks/11.0/gslapt-0.3.15-i386-1.tgz">http://software.jaos.org/slackpacks/11.0/gslapt-0.3.15-i386-1.tgz</a></p>
<p>&nbsp;<p>&nbsp;<p>или </p>
<p>&nbsp;<p>        swaret - <a href="http://swaret.sourceforge.net/">http://swaret.sourceforge.net/</a></p>
<p>&nbsp;<p>&nbsp;<p>Они автоматизируют многие шаги.</p>
<p>Вплоть до полностью автоматического обновления.</p>
<p>&nbsp;<p>ВНИМАНИЕ!</p>
<p>&nbsp;<p>Если вы пользуетесь каким-либо релизом, не стоит обновляться с дерева</p>
<p>-current! ( Разве что Вы захотите пощекотать себе нервы... )</p>
<p>Хотите иметь стабильно работающую систему - обновляйтесь из</p>
<p>соответствующих patches.</p>
<p>&nbsp;<p>&nbsp;<p><strong><span style="color:#990000;">4 - Установка недостающего софта.</span></strong></p>
<p>&nbsp;<p>Посмотрите внимательно на собственный диск со Slackware. (или на</p>
<p>ближайший репозитарий) (:)) </p>
<p>&nbsp;<p>Там есть такой каталожек, extra называется, много чего интересного в нем</p>
<p>найти можно.....  k3b, например....</p>
<p>&nbsp;<p>Если там необходимого пакета не оказалось, можно отправиться на поиски в</p>
<p>инет.</p>
<p>    </p>
<p>Самый известный ресурс слаковских пакетов - linuxpackages.net. Пакетов</p>
<p>много, но..... Тамошняя публика, как правило, не утруждает себя</p>
<p>выкладыванием SlackBuild'ов... :( К тому же мдавтьногие пакеты собраны с</p>
<p>весьма странными зависимостями....</p>
<p>        </p>
<p>Собираем сами.</p>
<p>Ну, самый известный способ установки нужной программы - </p>
<p><span style="color:#461b7e;">            </span></p>
<p>            configure &amp;&amp; make &amp;&amp; make install</p>
<p>    </p>
<p>    </p>
<p>Можете так и делать. </p>
<p>Если хотите привести свою систему в неуправляемое состояние.</p>
<p>...</p>
<p>            </p>
<p>ИМХО, данный подход оправдан только в одном случае: надо глянуть одним</p>
<p>глазом, что это за софтина, причем делается это не на критичной машине.</p>
<p>То есть на такой, которую со спокойной душой можно в любой момент</p>
<p>переставить начисто.</p>
<p>            </p>
<p>Во всех остальных случаях КРАЙНЕ рекомендуется сделать пакет.</p>
<p>&nbsp;<p>Вариантов два:</p>
<p>&nbsp;<p>1. пишем свой SlackBuild, что, ИМХО, предпочтительнее, так как серьезно</p>
<p>снижается головная боль при повторной сборке  того же софта. ( Вышла новая</p>
<p>версия, собираем с другими параметрами, да мало ли... ) подробнее - вот</p>
<p><a href="http://lafox.net/docs/slackbook/slackbook/package-management-making-packages.html">здесь</a>:</p>
<p>( SlackBook, глава 18.3 )</p>
<p>&nbsp;<p>&nbsp;<p><em>	</em></p>
<p>&nbsp;<p><em>   Создание пакетов</em></p>
<p>&nbsp;<p><em>   Создание  пакетов  Slackware может быть как простым, так и сложным. Не</em></p>
<p><em>   существует  чёткого метода для сборки пакетов. Единственное требование</em></p>
<p><em>   -  пакет  должен  был  tar-файлом,  сжатым  gzip'ом, и если в нём есть</em></p>
<p><em>   послеустановочный скрипт, это должен быть /install/doinst.sh.</em></p>
<p>&nbsp;<p><em>   Если  вы  заинтересованы  в создании пакетов для своей системы или для</em></p>
<p><em>   обслуживаемой  вами  сети  компьютеров,  вам  следует  ознакомиться  с</em></p>
<p><em>   различными  сборочными скриптами, доступными в дереве исходных текстов</em></p>
<p><em>   Slackware.  При  создании  пакетов  мы  используем несколько различных</em></p>
<p><em>   методов.</em></p>
<p>&nbsp;<p><em>   explodepkg</em></p>
<p>&nbsp;<p><em>   Утилита  explodepkg(8) делает то же самое, что и installpkg делает при</em></p>
<p><em>   установке  пакета,  однако на самом деле она не устанавливает его и не</em></p>
<p><em>   делает  запись  в базе данных пакетов. Она просто извлекает содержимое</em></p>
<p><em>   пакета в текущий каталог.</em></p>
<p>&nbsp;<p><em>   Если  вы  посмотрите на дерево исходных текстов Slackware, вы увидите,</em></p>
<p><em>   как  мы  используем  эту  команду  для пакетов &quot;framework&quot;. Эти пакеты</em></p>
<p><em>   содержат каркас будущего пакета. В них находятся все необходимые имена</em></p>
<p><em>   файлов  (нулевой  длины),  права  доступа  и  владельцы. Скрипт сборки</em></p>
<p><em>   извлекает  содержимое  пакета  из  каталога  с  исходными  текстами  и</em></p>
<p><em>   помещает его в каталог сборки.</em></p>
<p>&nbsp;<p><em>   makepkg</em></p>
<p>&nbsp;<p><em>   Утилита  makepkg(8)  упаковывает  содержимое текущего каталога в пакет</em></p>
<p><em>   Slackware. Он найдёт в дереве символические ссылки и добавит в скрипт,</em></p>
<p><em>   выполняемый  после  установки,  блок  команд,  создающих эти ссылки во</em></p>
<p><em>   время  установки пакета. Он также предупреждает вас о наличии в дереве</em></p>
<p><em>   пакета файлов нулевого размера.</em></p>
<p>&nbsp;<p><em>   Эта  команда  обычно  запускается  после  того,  как вы создали дерево</em></p>
<p><em>   своего пакета.</em></p>
<p>&nbsp;<p><em>   Скрипты SlackBuild</em></p>
<p>&nbsp;<p><em>   При  необходимости  пакеты  Slackware  могут  быть  собраны  и другими</em></p>
<p><em>   способами.  Не  всё  программное  обеспечение  в виде пакетов написано</em></p>
<p><em>   программистами  для компиляции одним и тем же способом. Во многих есть</em></p>
<p><em>   опции   компиляции,  которые  не  используются  в  пакетах  Slackware.</em></p>
<p><em>   Возможно,  когда-то  вам  понадобятся  эти функциональные возможности.</em></p>
<p><em>   Тогда  вам придётся собрать свой собственный пакет. К счастью у многих</em></p>
<p><em>   пакетов  Slackware  в  дереве  исходных текстов пакета вы можете найти</em></p>
<p><em>   скрипты SlackBuild.</em></p>
<p>&nbsp;<p><em>   Что  же такое скрипт SlackBuild? Скрипты SlackBuild представляют собой</em></p>
<p><em>   исполняемые   скрипты  командного  процессора,  запускаемые  вами  под</em></p>
<p><em>   root'ом  для  настройки,  компиляции  и создания пакетов Slackware. Вы</em></p>
<p><em>   можете  свободно  изменять  эти  скрипты  в  дереве исходных текстов и</em></p>
<p><em>   запускать их для создания своих собственных версий стандартных пакетов</em></p>
<p><em>   Slackware.</em></p>
<p><em>        </em></p>
<p>	</p>
<p>                </p>
<p>2. пользуемся checkinstall. (Живет в extra, так что далеко на поиски</p>
<p>ходить не надо).</p>
<p>&nbsp;<p>Выглядит это предельно просто:</p>
<p>                </p>
<p>        ./configure &lt;ваши_параметры&gt; &amp;&amp; make &amp;&amp; checkinstall.</p>
<p>                </p>
<p>                </p>
<p>Все, Вы имеете готовый для установки пакет.</p>
<p>&nbsp;<p>Позволю себе дать несколько рекомендаций. Следовать им, или нет - Ваше дело. </p>
<p>                </p>
<p>Изначально в Slackware каталог /usr/local пустой. Нет, дерево каталогов</p>
<p>там присутствует, но файлов там нет.</p>
<p>Как на меня, это очень предусмотрительно.</p>
<p>                </p>
<p>Почему?</p>
<p>&nbsp;<p>Как известно, за редчайшим исключением, ./configure &amp;&amp; make &amp;&amp; make</p>
<p>install поставит софтину именно в /usr/local.</p>
<p>&nbsp;<p>То есть </p>
<p>1. Вы не сотрете ненароком имеющуюся софтину,</p>
<p>2. Если то, что Вы собрали, Вас не устроило, можно спокойно удалить, не</p>
<p>   рискуя прибить ненароком чужое.</p>
<p>&nbsp;<p>Естественно, если Вы туда ставите все подряд и много, свалка там</p>
<p>получится еще та....</p>
<p>&nbsp;<p>Поэтому и стоит делать пакеты.</p>
<p>Собрали пакет, поставили, не понравилось - </p>
<p>&nbsp;<p>        removepkg пакет </p>
<p>&nbsp;<p>&nbsp;<p>И все. &quot;уже никто никуда не идет&quot; :).</p>
<p>Вышла новая версия - собрали новый пакет - </p>
<p>&nbsp;<p>        upgradepkg пакет </p>
<p>&nbsp;<p>&nbsp;<p>- все, новая софтинка уже стоит.</p>
<p>&nbsp;<p>&nbsp;<p>Я уже не говорю о том, что собирая пакеты так, как это делает Патрик, Вы</p>
<p>спокойно можете делиться плодами  своего труда с другими. (Или</p>
<p>тиражировать собранную софтинку на несколько машин, находящихся под</p>
<p>Вашим командованием. )</p>
<p>&nbsp;<p>Итак, если Вы уверены в корректности Вашего пакета, НЕ собирайте его в</p>
<p>/usr/local. Оставьте этот каталог для экспериментов.</p>
<p>&nbsp;<p>Ежели софтинка малознакомая, или нет уверенности в корректной работе,</p>
<p>или еще какие сомнения - тогда в /usr/local.</p>
<p>    </p>
<p>Естественно, это все всего лишь рекомендации, следовать им или нет -</p>
<p>Ваше личное дело.</p>
<p> </p>

</p></body></html>
