<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,serif'; color:#333333; background-color:#ffffff;">n Centos 5, /etc/rc.d/rc.sysinit looking for two locations to load modules </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#008000;"># Load other user-defined modules</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#0000ff;">for</span><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333;"> file </span><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#0000ff;">in</span><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333;"> /etc/sysconfig/modules</span><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#008000;">/*.modules ; do</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'consolas,Courier New,courier,monospace'; color:#008000; background-color:#fbfbfb;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;">[ -x $file ] &amp;&amp; $file</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;">done</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;"># Load modules (for backward compatibility with VARs)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;">if [ -f /etc/rc.modules ]; then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;">/etc/rc.modules</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;">fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Verdana,serif'; color:#333333; background-color:#ffffff;">As you can see, you can put load module commands in /etc/sysconfig/modules/*.modules  or /etc/rc.modules. Putting in /etc/rc.local might not work, because rc.local is executed very late. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#008000;">#e.g loading dummy network module &quot;dummy&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;">echo &quot;</span><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#8b0000;">modprobe dummy</span><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333;">&quot; &gt;/etc/sysconfig/modules/my.modules</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#333333; background-color:#fbfbfb;">chmod +x /etc/sysconfig/modules/my.</span><span style=" font-family:'consolas,Courier New,courier,monospace'; color:#0000ff;">modules</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'consolas,Courier New,courier,monospace'; color:#0000ff; background-color:#fbfbfb;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#fbfbfb;"><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333; background-color:#ffffff;">Kernel modules are usually loaded directly by the facility that requires them, which is given correct settings in the</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> </span><span style=" font-family:'Courier New,courier'; font-weight:600; color:#333333;">/etc/modprobe.conf</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> file. However, it is sometimes necessary to explicitly force the loading of a module at boot time.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333; background-color:#ffffff;">Red Hat Enterprise Linux checks for the existence of the</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> </span><span style=" font-family:'Courier New,courier'; font-weight:600; color:#333333;">/etc/rc.modules</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> file at boot time, which contains various commands to load modules. The </span><span style=" font-family:'Courier New,courier'; font-weight:600; color:#333333;">rc.modules</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> should be used, and </span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; font-style:italic; color:#333333;">not</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> </span><span style=" font-family:'Courier New,courier'; font-weight:600; color:#333333;">rc.local</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> because </span><span style=" font-family:'Courier New,courier'; font-weight:600; color:#333333;">rc.modules</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> is executed earlier in the boot process.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333; background-color:#ffffff;">For example, the following commands configure loading of the</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> </span><span style=" font-family:'Courier New,courier'; font-weight:600; color:#333333;">foo</span><span style=" font-family:'Myriad ,Bitstream Vera Sans,Lucida Grande,verdana,Luxi Sans,Trebuchet MS,helvetica,verdana,arial,sans-serif'; color:#333333;"> module at boot time (as root):</span></p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ede7c8;"><span style=" font-family:'Bitstream vera mono,monospace'; color:#333333; background-color:#ede7c8;"># echo modprobe foo &gt;&gt; /etc/rc.modules </span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ede7c8;"><span style=" font-family:'Bitstream vera mono,monospace'; color:#333333; background-color:#ede7c8;"># chmod +x /etc/rc.modules</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p></body></html>