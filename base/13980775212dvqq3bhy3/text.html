<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:10pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">KeepAliveTimeout DirectiveDescription:	Amount of time the server will wait for subsequent requests on a persistent connection</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Syntax:	KeepAliveTimeout seconds</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Default:	KeepAliveTimeout 5</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Context:	server config, virtual host</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Status:	Core</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Module:	core</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The number of seconds Apache will wait for a subsequent request before closing the connection. Once a request has been received, the timeout value specified by the Timeout directive applies.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Setting KeepAliveTimeout to a high value may cause performance problems in heavily loaded servers. The higher the timeout, the more server processes will be kept occupied waiting on connections with idle clients.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">In a name-based virtual host context, the value of the first defined virtual host (the default host) in a set of NameVirtualHost will be used. The other values will be ignored.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14pt; font-weight:600; text-decoration: underline;">mod_rewrite</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="flag_qsa"></a><span style=" font-size:12pt;">Q</span><span style=" font-size:12pt;">SA|qsappend</span></p>
<p style=" margin-top:0px; margin-bottom:16px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366; background-color:#ffffff;">When the replacement URI contains a query string, the default behavior of</span><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366;"> </span><a href="http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule"><span style=" font-family:'Courier New,Courier,monospace'; text-decoration: underline; color:#35a500; background-color:#000000;">RewriteRule</span></a><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366;"> is to discard the existing query string, and replace it with the newly generated one. Using the [QSA] flag causes the query strings to be combined.</span></p>
<p style=" margin-top:0px; margin-bottom:16px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366; background-color:#ffffff;">Consider the following rule:</span></p>
<p style=" margin-top:17px; margin-bottom:17px; margin-left:17px; margin-right:34px; -qt-block-indent:0; text-indent:0px; background-color:#e5ecf3;"><span style=" font-family:'Courier New,Courier,monospace'; font-weight:600; color:#112288;">RewriteRule</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;"> </span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">/</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;">pages</span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">/(.+)</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;"> </span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">/</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;">page</span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">.</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;">php</span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">?</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;">page</span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">=</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;">$1 </span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">[</span><span style=" font-family:'Courier New,Courier,monospace'; color:#000000;">QSA</span><span style=" font-family:'Courier New,Courier,monospace'; color:#666600;">]</span></p>
<p style=" margin-top:0px; margin-bottom:16px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#ffffff;"><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366; background-color:#ffffff;">With the [QSA] flag, a request for</span><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366;"> </span><span style=" font-family:'Courier New,Courier,monospace'; color:#003366;">/pages/123?one=two</span><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366;"> will be mapped to </span><span style=" font-family:'Courier New,Courier,monospace'; color:#003366;">/page.php?page=123&amp;one=two</span><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366;">. Without the [QSA] flag, that same request will be mapped to </span><span style=" font-family:'Courier New,Courier,monospace'; color:#003366;">/page.php?page=123</span><span style=" font-family:'Arial,Helvetica,sans-serif'; color:#003366;"> - that is, the existing query string will be discarded.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'sans-serif'; color:#000000; background-color:#ffffff;">Вопрос решился следующим образом</span></p>
<p style=" margin-top:12px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f5f5f5;"><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#660066;">RewriteCond</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;"> </span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">%{</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">QUERY_STRING</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">}</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;"> </span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">^(.+)</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">$<br /></span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#660066;">RewriteRule</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;"> </span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">^</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">action</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">/([^/]*)/?</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">$ </span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">?</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">action</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">=</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">$1</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">&amp;%</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#006666;">1</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;"> </span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">[</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">R</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">,</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#000000;">L</span><span style=" font-family:'Consolas,Monaco,Liberation Mono,Lucida Console,monospace'; color:#666600;">]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">То что помогло мне</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">RewriteEngine On</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Options +FollowSymlinks</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">#RewriteLogLevel 4</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">#RewriteLog &quot;/tmp/rewrite.log&quot;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">RewriteCond %{REQUEST_URI} ^/as/YoutubeDash/youtube.com/manifests_json [OR]</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">RewriteCond %{REQUEST_URI} ^/as/YoutubeDash/youtube.com/manifests_html</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">RewriteCond %{QUERY_STRING} ^(.+)$</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">RewriteRule (.+)\watch? $1\watch_%1 [QSA,L]</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"></p></body></html>